{"ast":null,"code":"// Object.keys\nif (!Object.keys) {\n  Object.keys = function (object) {\n    var keys = [];\n\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n\n    return keys;\n  };\n} // ChildNode.remove\n\n\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nimport { raf } from './helpers/raf.js';\nimport { caf } from './helpers/caf.js';\nimport { extend } from './helpers/extend.js';\nimport { checkStorageValue } from './helpers/checkStorageValue.js';\nimport { setLocalStorage } from './helpers/setLocalStorage.js';\nimport { getSlideId } from './helpers/getSlideId.js';\nimport { calc } from './helpers/calc.js';\nimport { percentageLayout } from './helpers/percentageLayout.js';\nimport { mediaquerySupport } from './helpers/mediaquerySupport.js';\nimport { createStyleSheet } from './helpers/createStyleSheet.js';\nimport { addCSSRule } from './helpers/addCSSRule.js';\nimport { removeCSSRule } from './helpers/removeCSSRule.js';\nimport { getCssRulesLength } from './helpers/getCssRulesLength.js';\nimport { toDegree } from './helpers/toDegree.js';\nimport { getTouchDirection } from './helpers/getTouchDirection.js';\nimport { forEach } from './helpers/forEach.js';\nimport { hasClass } from './helpers/hasClass.js';\nimport { addClass } from './helpers/addClass.js';\nimport { removeClass } from './helpers/removeClass.js';\nimport { hasAttr } from './helpers/hasAttr.js';\nimport { getAttr } from './helpers/getAttr.js';\nimport { setAttrs } from './helpers/setAttrs.js';\nimport { removeAttrs } from './helpers/removeAttrs.js';\nimport { arrayFromNodeList } from './helpers/arrayFromNodeList.js';\nimport { hideElement } from './helpers/hideElement.js';\nimport { showElement } from './helpers/showElement.js';\nimport { isVisible } from './helpers/isVisible.js';\nimport { whichProperty } from './helpers/whichProperty.js';\nimport { has3DTransforms } from './helpers/has3DTransforms.js';\nimport { getEndProperty } from './helpers/getEndProperty.js';\nimport { addEvents } from './helpers/addEvents.js';\nimport { removeEvents } from './helpers/removeEvents.js';\nimport { Events } from './helpers/events.js';\nimport { jsTransform } from './helpers/jsTransform.js';\nexport var tns = function (options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n  var doc = document,\n      win = window,\n      KEYS = {\n    ENTER: 13,\n    SPACE: 32,\n    LEFT: 37,\n    RIGHT: 39\n  },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date();\n\n    try {\n      tnsStorage = win.localStorage;\n\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n\n      if (!localStorageAccess) {\n        tnsStorage = {};\n      }\n    } catch (e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function (item) {\n          tnsStorage.removeItem(item);\n        });\n      } // update browserInfo\n\n\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess); // get element nodes from selectors\n\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n  tnsList.forEach(function (item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) {\n          console.warn('Can\\'t find', options[item]);\n        }\n\n        return;\n      }\n    }\n  }); // make sure at least 1 slide\n\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) {\n      console.warn('No slides found in', options.container);\n    }\n\n    return;\n  } // update options\n\n\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n\n    for (var key in responsive) {\n      var val = responsive[key]; // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n\n      val = typeof val === 'number' ? {\n        items: val\n      } : val;\n      responsiveTem[key] = val;\n    }\n\n    responsive = responsiveTem;\n    responsiveTem = null;\n  } // update options\n\n\n  function updateOptions(obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') {\n          obj[key] = 'page';\n        }\n\n        if (key === 'edgePadding') {\n          obj[key] = false;\n        }\n\n        if (key === 'autoHeight') {\n          obj[key] = false;\n        }\n      } // update responsive options\n\n\n      if (key === 'responsive') {\n        updateOptions(obj[key]);\n      }\n    }\n  }\n\n  if (!carousel) {\n    updateOptions(options);\n  } // === define and set variables ===\n\n\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n\n  if (responsive) {\n    setBreakpointZone();\n  }\n\n  if (carousel) {\n    container.className += ' tns-vpfix';\n  } // fixedWidth: viewport > rightBoundary > indexMax\n\n\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions,\n      // collection of slide positions\n  slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = !carousel || !loop ? true : false,\n      // transform\n  transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n  getIndexMax = function () {\n    if (fixedWidth) {\n      return function () {\n        return center && !loop ? slideCount - 1 : Math.ceil(-rightBoundary / (fixedWidth + gutter));\n      };\n    } else if (autoWidth) {\n      return function () {\n        for (var i = 0; i < slideCountNew; i++) {\n          if (slidePositions[i] >= -rightBoundary) {\n            return i;\n          }\n        }\n      };\n    } else {\n      return function () {\n        if (center && carousel && !loop) {\n          return slideCount - 1;\n        } else {\n          return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n        }\n      };\n    }\n  }(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index,\n      displayIndex = getCurrentSlide(),\n      indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      // resize\n  resizeTimer,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n  newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n    'click': onControlsClick,\n    'keydown': onControlsKeydown\n  },\n      navEvents = {\n    'click': onNavClick,\n    'keydown': onNavKeydown\n  },\n      hoverEvents = {\n    'mouseover': mouseoverPause,\n    'mouseout': mouseoutRestart\n  },\n      visibilityEvent = {\n    'visibilitychange': onVisibilityChange\n  },\n      docmentKeydownEvent = {\n    'keydown': onDocumentKeydown\n  },\n      touchEvents = {\n    'touchstart': onPanStart,\n    'touchmove': onPanMove,\n    'touchend': onPanEnd,\n    'touchcancel': onPanEnd\n  },\n      dragEvents = {\n    'mousedown': onPanStart,\n    'mousemove': onPanMove,\n    'mouseup': onPanEnd,\n    'mouseleave': onPanEnd\n  },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n    'load': onImgLoaded,\n    'error': onImgFailed\n  },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false; // controls\n\n\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  } // nav\n\n\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  } // autoplay\n\n\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        disX,\n        disY,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ? function (a, b) {\n      return a.x - b.x;\n    } : function (a, b) {\n      return a.y - b.y;\n    };\n  } // disable slider when slidecount <= items\n\n\n  if (!autoWidth) {\n    resetVariblesWhenDisable(disable || freeze);\n  }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n  }\n\n  if (carousel) {\n    container.className = container.className.replace('tns-vpfix', '');\n  }\n\n  initStructure();\n  initSheet();\n  initSliderTransform(); // === COMMON FUNCTIONS === //\n\n  function resetVariblesWhenDisable(condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide() {\n    var tem = carousel ? index - cloneCount : index;\n\n    while (tem < 0) {\n      tem += slideCount;\n    }\n\n    return tem % slideCount + 1;\n  }\n\n  function getStartIndex(ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex(i) {\n    if (i == null) {\n      i = index;\n    }\n\n    if (carousel) {\n      i -= cloneCount;\n    }\n\n    while (i < 0) {\n      i += slideCount;\n    }\n\n    return Math.floor(i % slideCount);\n  }\n\n  function getCurrentNavIndex() {\n    var absIndex = getAbsIndex(),\n        result;\n    result = navAsThumbnails ? absIndex : fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) : Math.floor(absIndex / items); // set active nav to the last one when reaches the right edge\n\n    if (!loop && carousel && index === indexMax) {\n      result = pages - 1;\n    }\n\n    return result;\n  }\n\n  function getItemsMax() {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || fixedWidth && !viewportMax) {\n      return slideCount - 1; // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) {\n        arr.push(options[str]);\n      }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n\n          if (tem && (fixedWidth || tem < slideCount)) {\n            arr.push(tem);\n          }\n        }\n      }\n\n      if (!arr.length) {\n        arr.push(0);\n      }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop() {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount) / 2) : itemsMax * 4 - slideCount;\n    result = Math.max(itemsMax, result);\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth() {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition(pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth(el) {\n    if (el == null) {\n      return;\n    }\n\n    var div = doc.createElement('div'),\n        rect,\n        width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth() {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption(item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  } // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n\n\n  function getOption(item, ww) {\n    if (ww == null) {\n      ww = windowWidth;\n    }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) {\n              result = responsive[bp][item];\n            }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') {\n        result = getOption('items');\n      }\n\n      if (!carousel && (item === 'slideBy' || item === 'items')) {\n        result = Math.floor(result);\n      }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft(i) {\n    return CALC ? CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' : i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles(edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n\n      if (gutterTem) {\n        gap -= gutterTem;\n      }\n\n      str = horizontal ? 'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' : 'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';';\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) {\n      str += getTransitionDurationStyle(speedTem);\n    }\n\n    return str;\n  }\n\n  function getContainerWidth(fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ? CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' : slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle(fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = fixedWidthTem + gutterTem + 'px';\n    } else {\n      if (!carousel) {\n        itemsTem = Math.floor(itemsTem);\n      }\n\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ? CALC + '(100% / ' + dividend + ')' : 100 / dividend + '%';\n    }\n\n    width = 'width:' + width; // inner slider: overwrite outer slider styles\n\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle(gutterTem) {\n    var str = ''; // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop + dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix(name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n\n    if (prefix) {\n      prefix = '-' + prefix + '-';\n    }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle(speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle(speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure() {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner',\n        hasGutter = hasOption('gutter');\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw'; // set container properties\n\n    if (container.id === '') {\n      container.id = slideId;\n    }\n\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n\n    if (autoWidth) {\n      newContainerClasses += ' tns-autowidth';\n    }\n\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses; // add constrain layer for carousel\n\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container); // add id, class, aria attributes\n    // before clone slides\n\n    forEach(slideItems, function (item, i) {\n      addClass(item, 'tns-item');\n\n      if (!item.id) {\n        item.id = slideId + '-item' + i;\n      }\n\n      if (!carousel && animateNormal) {\n        addClass(item, animateNormal);\n      }\n\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    }); // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j % slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n  }\n\n  function initSliderTransform() {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img'); // add img load event listener\n\n      forEach(imgs, function (img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n            img.src = src; // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      }); // set imgsComplete\n\n      raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), function () {\n          imgsComplete = true;\n        });\n      }); // reset imgs for auto height: check visible imgs only\n\n      if (hasOption('autoHeight')) {\n        imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1));\n      }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck);\n      });\n    } else {\n      // set container transform property\n      if (carousel) {\n        doContainerTransformSilent();\n      } // update slider tools and events\n\n\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck() {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n        Math.abs(left - right) <= 1 ? initSliderTransformCore() : setTimeout(function () {\n          stylesApplicationCheck();\n        }, 16);\n      })();\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n  function initSliderTransformCore() {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n\n        if (freezable) {\n          freeze = getFreeze();\n        }\n\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    } // set container transform property\n\n\n    if (carousel) {\n      doContainerTransformSilent();\n    } // update slider tools and events\n\n\n    initTools();\n    initEvents();\n  }\n\n  function initSheet() {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // #### LAYOUT\n    // ## INLINE-BLOCK VS FLOAT\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n\n\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    } // ## BASIC STYLES\n\n\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      } // inner wrapper styles\n\n\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet)); // container styles\n\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      } // slide styles\n\n\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n\n      if (options.gutter) {\n        str += getSlideGutterStyle(options.gutter);\n      } // set gallery items transition-duration\n\n\n      if (!carousel) {\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        if (ANIMATIONDURATION) {\n          str += getAnimationDurationStyle(speed);\n        }\n      }\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      } // non CSS mediaqueries: IE8\n      // ## update inner wrapper, container, slides if needed\n      // set inline styles for inner wrapper & container\n      // insert stylesheet (one line) for slides only (since slides are many)\n\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration(); // inner wrapper styles\n\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight); // container styles\n\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      } // slide styles\n\n\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n\n      if (gutter) {\n        str += getSlideGutterStyle(gutter);\n      } // append to the last line\n\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n    } // ## MEDIAQUERIES\n\n\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp); // middle wrapper string\n\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        } // inner wrapper string\n\n\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        } // container string\n\n\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || fixedWidth && 'gutter' in opts)) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        } // slide string\n\n\n        if ('fixedWidth' in opts || fixedWidth && 'gutter' in opts || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        } // set gallery items transition-duration\n\n\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) {\n            slideStr += getTransitionDurationStyle(speedBP);\n          }\n\n          if (ANIMATIONDURATION) {\n            slideStr += getAnimationDurationStyle(speedBP);\n          }\n        }\n\n        if (slideStr) {\n          slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}';\n        } // add up\n\n\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools() {\n    // == slides ==\n    updateSlideStatus(); // == live region ==\n\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current'); // == autoplayInit ==\n\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {\n          'data-action': txt\n        });\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      } // add event\n\n\n      if (autoplayButton) {\n        addEvents(autoplayButton, {\n          'click': toggleAutoplay\n        });\n      }\n\n      if (autoplay) {\n        startAutoplay();\n\n        if (autoplayHoverPause) {\n          addEvents(container, hoverEvents);\n        }\n\n        if (autoplayResetOnVisibility) {\n          addEvents(container, visibilityEvent);\n        }\n      }\n    } // == navInit ==\n\n\n    if (hasNav) {\n      var initIndex = !carousel ? 0 : cloneCount; // customized nav\n      // will not hide the navs in case they're thumbnails\n\n      if (navContainer) {\n        setAttrs(navContainer, {\n          'aria-label': 'Carousel Pagination'\n        });\n        navItems = navContainer.children;\n        forEach(navItems, function (item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId\n          });\n        }); // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i + '\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) + '\"></button>';\n        }\n\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility(); // add transition\n\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {\n        'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n      });\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass); // add events\n\n      addEvents(navContainer, navEvents);\n    } // == controlsInit ==\n\n\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[1] + '</button></div>');\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs(prevButton, {\n          'data-controls': 'prev'\n        });\n        setAttrs(nextButton, {\n          'data-controls': 'next'\n        });\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n      updateControlsStatus(); // add events\n\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    } // hide tools if needed\n\n\n    disableUI();\n  }\n\n  function initEvents() {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) {\n      addEvents(container, touchEvents, options.preventScrollOnTouch);\n    }\n\n    if (mouseDrag) {\n      addEvents(container, dragEvents);\n    }\n\n    if (arrowKeys) {\n      addEvents(doc, docmentKeydownEvent);\n    }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {\n        'resize': onResize\n      });\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) {\n        doAutoHeight();\n      }\n    }\n\n    doLazyLoad();\n\n    if (disable) {\n      disableSlider();\n    } else if (freeze) {\n      freezeSlider();\n    }\n\n    events.on('indexChanged', additionalUpdates);\n\n    if (nested === 'inner') {\n      events.emit('innerLoaded', info());\n    }\n\n    if (typeof onInit === 'function') {\n      onInit(info());\n    }\n\n    isOn = true;\n  }\n\n  function destroy() {\n    // sheet\n    sheet.disabled = true;\n\n    if (sheet.ownerNode) {\n      sheet.ownerNode.remove();\n    } // remove win event listeners\n\n\n    removeEvents(win, {\n      'resize': onResize\n    }); // arrowKeys, controls, nav\n\n    if (arrowKeys) {\n      removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controlsContainer) {\n      removeEvents(controlsContainer, controlsEvents);\n    }\n\n    if (navContainer) {\n      removeEvents(navContainer, navEvents);\n    } // autoplay\n\n\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n\n    if (autoplayButton) {\n      removeEvents(autoplayButton, {\n        'click': toggleAutoplay\n      });\n    }\n\n    if (autoplay) {\n      clearInterval(autoplayTimer);\n    } // container\n\n\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n\n    if (touch) {\n      removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag) {\n      removeEvents(container, dragEvents);\n    } // cache Object values in options && reset HTML\n\n\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n    tnsList.forEach(function (item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    }); // reset variables\n\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = resizeTimer = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = disX = disY = panStart = rafIndex = getDist = touch = mouseDrag = null; // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') {\n        this[a] = null;\n      }\n    }\n\n    isOn = false;\n  } // === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n\n\n  function onResize(e) {\n    raf(function () {\n      resizeTasks(getEvent(e));\n    });\n  }\n\n  function resizeTasks(e) {\n    if (!isOn) {\n      return;\n    }\n\n    if (nested === 'outer') {\n      events.emit('outerResized', info(e));\n    }\n\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone; // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n\n      if (bpChanged) {\n        events.emit('newBreakpointStart', info(e));\n      }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    } // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n\n\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    } // update options\n\n\n    resetVariblesWhenDisable(disable);\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n\n        needContainerTransform = true;\n      }\n    }\n\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n      // fixedWidth: <= viewport, fixedWidth, gutter\n\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n      // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) {\n          indexMax = getIndexMax();\n        } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n\n\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n      // <= fixedWidth: fixedWidth, gutter, rightBoundary\n      // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n\n    if (!autoplay) {\n      autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ? addEvents(doc, docmentKeydownEvent) : removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            showElement(prevButton);\n          }\n\n          if (nextButton) {\n            showElement(nextButton);\n          }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            hideElement(prevButton);\n          }\n\n          if (nextButton) {\n            hideElement(nextButton);\n          }\n        }\n      }\n    }\n\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer);\n      }\n    }\n\n    if (touch !== touchTem) {\n      touch ? addEvents(container, touchEvents, options.preventScrollOnTouch) : removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ? addEvents(container, dragEvents) : removeEvents(container, dragEvents);\n    }\n\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) {\n          showElement(autoplayButton);\n        }\n\n        if (!animating && !autoplayUserPaused) {\n          startAutoplay();\n        }\n      } else {\n        if (autoplayButton) {\n          hideElement(autoplayButton);\n        }\n\n        if (animating) {\n          stopAutoplay();\n        }\n      }\n    }\n\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ? addEvents(container, hoverEvents) : removeEvents(container, hoverEvents);\n    }\n\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ? addEvents(doc, visibilityEvent) : removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) {\n        needContainerTransform = true;\n      }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) {\n          innerWrapper.style.height = '';\n        }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) {\n        needContainerTransform = true;\n      }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) {\n        additionalUpdates();\n      }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) {\n      updateGallerySlidePositions();\n    }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          } // slide styles\n\n\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) + getSlideGutterStyle(gutter); // remove the last line and\n          // add new styles\n\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      } // auto height\n\n\n      if (autoHeight) {\n        doAutoHeight();\n      }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) {\n      events.emit('newBreakpointEnd', info(e));\n    }\n  } // === INITIALIZATION FUNCTIONS === //\n\n\n  function getFreeze() {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone() {\n    breakpointZone = 0;\n\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n\n      if (windowWidth >= bp) {\n        breakpointZone = bp;\n      }\n    }\n  } // (slideBy, indexMin, indexMax) => index\n\n\n  var updateIndex = function () {\n    return loop ? carousel ? // loop + carousel\n    function () {\n      var leftEdge = indexMin,\n          rightEdge = indexMax;\n      leftEdge += slideBy;\n      rightEdge -= slideBy; // adjust edges when has edge paddings\n      // or fixed-width slider with extra space on the right side\n\n      if (edgePadding) {\n        leftEdge += 1;\n        rightEdge -= 1;\n      } else if (fixedWidth) {\n        if ((viewport + gutter) % (fixedWidth + gutter)) {\n          rightEdge -= 1;\n        }\n      }\n\n      if (cloneCount) {\n        if (index > rightEdge) {\n          index -= slideCount;\n        } else if (index < leftEdge) {\n          index += slideCount;\n        }\n      }\n    } : // loop + gallery\n    function () {\n      if (index > indexMax) {\n        while (index >= indexMin + slideCount) {\n          index -= slideCount;\n        }\n      } else if (index < indexMin) {\n        while (index <= indexMax - slideCount) {\n          index += slideCount;\n        }\n      }\n    } : // non-loop\n    function () {\n      index = Math.max(indexMin, Math.min(indexMax, index));\n    };\n  }();\n\n  function disableUI() {\n    if (!autoplay && autoplayButton) {\n      hideElement(autoplayButton);\n    }\n\n    if (!nav && navContainer) {\n      hideElement(navContainer);\n    }\n\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          hideElement(prevButton);\n        }\n\n        if (nextButton) {\n          hideElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function enableUI() {\n    if (autoplay && autoplayButton) {\n      showElement(autoplayButton);\n    }\n\n    if (nav && navContainer) {\n      showElement(navContainer);\n    }\n\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          showElement(prevButton);\n        }\n\n        if (nextButton) {\n          showElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function freezeSlider() {\n    if (frozen) {\n      return;\n    } // remove edge padding from inner wrapper\n\n\n    if (edgePadding) {\n      innerWrapper.style.margin = '0px';\n    } // add class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          addClass(slideItems[i], str);\n        }\n\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    disableUI();\n    frozen = true;\n  }\n\n  function unfreezeSlider() {\n    if (!frozen) {\n      return;\n    } // restore edge padding for inner wrapper\n    // for mordern browsers\n\n\n    if (edgePadding && CSSMQ) {\n      innerWrapper.style.margin = '';\n    } // remove class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          removeClass(slideItems[i], str);\n        }\n\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    enableUI();\n    frozen = false;\n  }\n\n  function disableSlider() {\n    if (disabled) {\n      return;\n    }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          hideElement(slideItems[j]);\n        }\n\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // vertical slider\n\n\n    if (!horizontal || !carousel) {\n      removeAttrs(innerWrapper, ['style']);\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // update tools\n\n\n    disableUI();\n    disabled = true;\n  }\n\n  function enableSlider() {\n    if (!disabled) {\n      return;\n    }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          showElement(slideItems[j]);\n        }\n\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    } // update tools\n\n\n    enableUI();\n    disabled = false;\n  }\n\n  function updateLiveRegion() {\n    var str = getLiveRegionStr();\n\n    if (liveregionCurrent.innerHTML !== str) {\n      liveregionCurrent.innerHTML = str;\n    }\n  }\n\n  function getLiveRegionStr() {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    var start = index,\n        end,\n        rangestart,\n        rangeend; // get range start, range end for autoWidth and fixedWidth\n\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = -(parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    } // get start, end\n    // - check auto width\n\n\n    if (autoWidth) {\n      slidePositions.forEach(function (point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) {\n            start = i;\n          }\n\n          if (rangeend - point >= 0.5) {\n            end = i;\n          }\n        }\n      }); // - check percentage width, fixed width\n    } else {\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n\n        if (center || edgePadding) {\n          start = Math.floor(rangestart / cell);\n          end = Math.ceil(rangeend / cell - 1);\n        } else {\n          end = start + Math.ceil(viewport / cell) - 1;\n        }\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad() {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n\n          eve[TRANSITIONEND] = function (e) {\n            e.stopPropagation();\n          };\n\n          addEvents(img, eve);\n          addEvents(img, imgEvents); // update src\n\n          img.src = getAttr(img, 'data-src'); // update srcset\n\n          var srcset = getAttr(img, 'data-srcset');\n\n          if (srcset) {\n            img.srcset = srcset;\n          }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded(e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed(e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded(img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed(img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted(img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray(start, end, imgSelector) {\n    var imgs = [];\n\n    if (!imgSelector) {\n      imgSelector = 'img';\n    }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) {\n        imgs.push(img);\n      });\n      start++;\n    }\n\n    return imgs;\n  } // check if all visible images are loaded\n  // and update container height if it's done\n\n\n  function doAutoHeight() {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function () {\n      imgsLoadedCheck(imgs, updateInnerWrapperHeight);\n    });\n  }\n\n  function imgsLoadedCheck(imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) {\n      return cb();\n    } // check image classes\n\n\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) {\n        imgCompleted(img);\n      } // Check image.complete\n\n\n      if (hasClass(img, imgCompleteClass)) {\n        imgs.splice(index, 1);\n      }\n    }); // execute callback function if selected images are all complete\n\n    if (!imgs.length) {\n      return cb();\n    } // otherwise execute this functiona again\n\n\n    raf(function () {\n      imgsLoadedCheck(imgs, cb);\n    });\n  }\n\n  function additionalUpdates() {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n  function update_carousel_transition_duration() {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight(slideStart, slideRange) {\n    var heights = [];\n\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  } // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n\n\n  function updateInnerWrapperHeight() {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) {\n      wp.style.height = maxHeight + 'px';\n    }\n  } // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n\n\n  function setSlidePositions() {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n    forEach(slideItems, function (item, i) {\n      // skip the first slide\n      if (i) {\n        slidePositions.push(item.getBoundingClientRect()[attr] - base);\n      } // add the end edge\n\n\n      if (i === slideCountNew - 1) {\n        slidePositions.push(item.getBoundingClientRect()[attr2] - base);\n      }\n    });\n  } // update slide\n\n\n  function updateSlideStatus() {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n    forEach(slideItems, function (item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        } // hide slides\n\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  } // gallery: update slide position\n\n\n  function updateGallerySlidePositions() {\n    var l = index + Math.min(slideCount, items);\n\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      } // remove outlet animation\n\n\n      removeClass(item, animateOut);\n    } // removing '.tns-moving'\n\n\n    setTimeout(function () {\n      forEach(slideItems, function (el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  } // set tabindex on Nav\n\n\n  function updateNavStatus() {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n        setAttrs(navCurrent, {\n          'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n        });\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName(el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton(el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled(el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement(isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  } // set 'disabled' to true on controls when reach the edges\n\n\n  function updateControlsStatus() {\n    if (!controls || rewind || loop) {\n      return;\n    }\n\n    var prevDisabled = prevIsButton ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = nextIsButton ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = index <= indexMin ? true : false,\n        disableNext = !rewind && index >= indexMax ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  } // set duration\n\n\n  function resetDuration(el, str) {\n    if (TRANSITIONDURATION) {\n      el.style[TRANSITIONDURATION] = str;\n    }\n  }\n\n  function getSliderWidth() {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? (viewport - gap - (slidePositions[num + 1] - slidePositions[num] - gutter)) / 2 : fixedWidth ? (viewport - fixedWidth) / 2 : (items - 1) / 2;\n  }\n\n  function getRightBoundary() {\n    var gap = edgePadding ? gutter : 0,\n        result = viewport + gap - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? -(fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() : getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n\n    if (result > 0) {\n      result = 0;\n    }\n\n    return result;\n  }\n\n  function getContainerTransformValue(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var val;\n\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = -(fixedWidth + gutter) * num;\n\n        if (center) {\n          val += getCenterGap();\n        }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n\n        if (center) {\n          num -= getCenterGap();\n        }\n\n        val = -num * 100 / denominator;\n      }\n    } else {\n      val = -slidePositions[num];\n\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) {\n      val = Math.max(val, rightBoundary);\n    }\n\n    val += horizontal && !autoWidth && !fixedWidth ? '%' : 'px';\n    return val;\n  }\n\n  function doContainerTransformSilent(val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide(number, classOut, classIn, isOut) {\n    var l = number + items;\n\n    if (!loop) {\n      l = Math.min(l, slideCountNew);\n    }\n\n    for (var i = number; i < l; i++) {\n      var item = slideItems[i]; // set item positions\n\n      if (!isOut) {\n        item.style.left = (i - index) * 100 / items + '%';\n      }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) {\n        slideItemsOut.push(item);\n      }\n    }\n  } // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n\n\n  var transformCore = function () {\n    return carousel ? function () {\n      resetDuration(container, '');\n\n      if (TRANSITIONDURATION || !speed) {\n        // for morden browsers with non-zero duration or\n        // zero duration for all browsers\n        doContainerTransform(); // run fallback function manually\n        // when duration is 0 / container is hidden\n\n        if (!speed || !isVisible(container)) {\n          onTransitionEnd();\n        }\n      } else {\n        // for old browser with non-zero duration\n        jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n      }\n\n      if (!horizontal) {\n        updateContentWrapperHeight();\n      }\n    } : function () {\n      slideItemsOut = [];\n      var eve = {};\n      eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n      removeEvents(slideItems[indexCached], eve);\n      addEvents(slideItems[index], eve);\n      animateSlide(indexCached, animateIn, animateOut, true);\n      animateSlide(index, animateNormal, animateIn); // run fallback function manually\n      // when transition or animation not supported / duration is 0\n\n      if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) {\n        onTransitionEnd();\n      }\n    };\n  }();\n\n  function render(e, sliderMoved) {\n    if (updateIndexBeforeTransform) {\n      updateIndex();\n    } // render when slider was moved (touch or drag) even though index may not change\n\n\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n\n      if (autoHeight) {\n        doAutoHeight();\n      } // pause autoplay when click or keydown from user\n\n\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) {\n        stopAutoplay();\n      }\n\n      running = true;\n      transformCore();\n    }\n  }\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n\n\n  function strTrans(str) {\n    return str.toLowerCase().replace(/-/g, '');\n  } // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n\n\n  function onTransitionEnd(event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i]; // set item positions\n\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n\n\n      if (!event || !carousel && event.target.parentNode === container || event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') {\n          events.emit('innerLoaded', info());\n        }\n\n        running = false;\n        indexCached = index;\n      }\n    }\n  } // # ACTIONS\n\n\n  function goTo(targetIndex, e) {\n    if (freeze) {\n      return;\n    } // prev slideBy\n\n\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1); // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1); // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) {\n          return;\n        } else {\n          onTransitionEnd();\n        }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = -absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') {\n          targetIndex = parseInt(targetIndex);\n        }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) {\n            targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex));\n          }\n\n          indexGap = targetIndex - absIndex;\n        }\n      } // gallery: make sure new page won't overlap with current page\n\n\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += index + indexGap - slideCount >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap; // make sure index is in range\n\n      if (carousel && loop) {\n        if (index < indexMin) {\n          index += slideCount;\n        }\n\n        if (index > indexMax) {\n          index -= slideCount;\n        }\n      } // if index is changed, start rendering\n\n\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n    }\n  } // on controls click\n\n\n  function onControlsClick(e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) {\n        target = target.parentNode;\n      }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n\n      if (autoWidth) {\n        index = Math.floor(index);\n      } // pass e when click control buttons or keydown\n\n\n      render(passEventObject || e && e.type === 'keydown' ? e : null);\n    }\n  } // on nav click\n\n\n  function onNavClick(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e),\n        navIndex; // find the clicked nav item\n\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) {\n      target = target.parentNode;\n    }\n\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) {\n          stopAutoplay();\n        }\n\n        navClicked = -1; // reset navClicked\n      }\n    }\n  } // autoplay functions\n\n\n  function setAutoplayTimer() {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n    animating = true;\n  }\n\n  function stopAutoplayTimer() {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton(action, txt) {\n    setAttrs(autoplayButton, {\n      'data-action': action\n    });\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay() {\n    setAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('stop', autoplayText[1]);\n    }\n  }\n\n  function stopAutoplay() {\n    stopAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('start', autoplayText[0]);\n    }\n  } // programaitcally play/pause the slider\n\n\n  function play() {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function pause() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange() {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause() {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart() {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  } // keydown events on document\n\n\n  function onDocumentKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  } // on key control\n\n\n  function onControlsKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) {\n          onControlsClick(e, -1);\n        }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  } // set focus\n\n\n  function setFocus(el) {\n    el.focus();\n  } // on key nav\n\n\n  function onNavKeydown(e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n\n    if (!hasAttr(curElement, 'data-nav')) {\n      return;\n    } // var code = e.keyCode,\n\n\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) {\n          setFocus(navItems[navIndex - 1]);\n        }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) {\n          setFocus(navItems[navIndex + 1]);\n        }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent(e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n\n  function getTarget(e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent(e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior(e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected() {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    if (autoplay && animating) {\n      stopAutoplayTimer();\n    }\n\n    panStart = true;\n\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove(e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) {\n          rafIndex = raf(function () {\n            panUpdate(e);\n          });\n        }\n      } else {\n        if (moveDirectionExpected === '?') {\n          moveDirectionExpected = getMoveDirectionExpected();\n        }\n\n        if (moveDirectionExpected) {\n          preventScroll = true;\n        }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate(e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n\n    caf(rafIndex);\n\n    if (panStart) {\n      rafIndex = raf(function () {\n        panUpdate(e);\n      });\n    }\n\n    if (moveDirectionExpected === '?') {\n      moveDirectionExpected = getMoveDirectionExpected();\n    }\n\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) {\n        preventScroll = true;\n      }\n\n      try {\n        if (e.type) {\n          events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e));\n        }\n      } catch (err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew) : dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd(e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n\n      if (carousel) {\n        resetDuration(container, '');\n      }\n\n      panStart = false;\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {\n            'click': function preventClick(e) {\n              preventDefaultBehavior(e);\n              removeEvents(target, {\n                'click': preventClick\n              });\n            }\n          });\n        }\n\n        if (carousel) {\n          rafIndex = raf(function () {\n            if (horizontal && !autoWidth) {\n              var indexMoved = -dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = -(translateInit + dist);\n\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n\n                  if (moved > slidePositions[i] && dist < 0) {\n                    index += 1;\n                  }\n\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    } // reset\n\n\n    if (options.preventScrollOnTouch === 'auto') {\n      preventScroll = false;\n    }\n\n    if (swipeAngle) {\n      moveDirectionExpected = '?';\n    }\n\n    if (autoplay && !animating) {\n      setAutoplayTimer();\n    }\n  } // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n\n\n  function updateContentWrapperHeight() {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages() {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n\n\n  function updateNavVisibility() {\n    if (!nav || navAsThumbnails) {\n      return;\n    }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      } // cache pages\n\n\n      pagesCached = pages;\n    }\n  }\n\n  function info(e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {}\n    };\n  }\n\n  return {\n    version: '2.9.3',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function () {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/Matheus/Desktop/ProjetoDotDigital/ProjetoReact/projeto-react/node_modules/tiny-slider/src/tiny-slider.js"],"names":["Object","keys","object","name","prototype","hasOwnProperty","call","push","Element","remove","parentNode","removeChild","raf","caf","extend","checkStorageValue","setLocalStorage","getSlideId","calc","percentageLayout","mediaquerySupport","createStyleSheet","addCSSRule","removeCSSRule","getCssRulesLength","toDegree","getTouchDirection","forEach","hasClass","addClass","removeClass","hasAttr","getAttr","setAttrs","removeAttrs","arrayFromNodeList","hideElement","showElement","isVisible","whichProperty","has3DTransforms","getEndProperty","addEvents","removeEvents","Events","jsTransform","tns","options","container","mode","axis","items","gutter","edgePadding","fixedWidth","autoWidth","viewportMax","slideBy","center","controls","controlsPosition","controlsText","controlsContainer","prevButton","nextButton","nav","navPosition","navContainer","navAsThumbnails","arrowKeys","speed","autoplay","autoplayPosition","autoplayTimeout","autoplayDirection","autoplayText","autoplayHoverPause","autoplayButton","autoplayButtonOutput","autoplayResetOnVisibility","animateIn","animateOut","animateNormal","animateDelay","loop","rewind","autoHeight","responsive","lazyload","lazyloadSelector","touch","mouseDrag","swipeAngle","nested","preventActionWhenRunning","preventScrollOnTouch","freezable","onInit","useLocalStorage","nonce","doc","document","win","window","KEYS","ENTER","SPACE","LEFT","RIGHT","tnsStorage","localStorageAccess","browserInfo","navigator","userAgent","uid","Date","localStorage","setItem","getItem","removeItem","e","item","CALC","PERCENTAGELAYOUT","CSSMQ","TRANSFORM","HAS3DTRANSFORMS","TRANSITIONDURATION","TRANSITIONDELAY","ANIMATIONDURATION","ANIMATIONDELAY","TRANSITIONEND","ANIMATIONEND","supportConsoleWarn","console","warn","tnsList","optionsElements","str","el","querySelector","nodeName","children","length","carousel","responsiveTem","key","val","updateOptions","obj","horizontal","outerWrapper","createElement","innerWrapper","middleWrapper","containerParent","containerHTML","outerHTML","slideItems","slideCount","breakpointZone","windowWidth","getWindowWidth","isOn","setBreakpointZone","className","getOption","viewport","getViewportWidth","Math","floor","fixedWidthViewportWidth","sheet","slidePositions","slideItemsOut","cloneCount","getCloneCountForLoop","slideCountNew","hasRightDeadZone","rightBoundary","getRightBoundary","updateIndexBeforeTransform","transformAttr","transformPrefix","transformPostfix","getIndexMax","ceil","i","max","index","getStartIndex","indexCached","displayIndex","getCurrentSlide","indexMin","indexMax","resizeTimer","moveDirectionExpected","running","events","newContainerClasses","slideId","id","disable","disabled","freeze","getFreeze","frozen","controlsEvents","onControlsClick","onControlsKeydown","navEvents","onNavClick","onNavKeydown","hoverEvents","mouseoverPause","mouseoutRestart","visibilityEvent","onVisibilityChange","docmentKeydownEvent","onDocumentKeydown","touchEvents","onPanStart","onPanMove","onPanEnd","dragEvents","hasControls","hasOption","hasNav","hasAutoplay","hasTouch","hasMouseDrag","slideActiveClass","slideClonedClass","imgCompleteClass","imgEvents","onImgLoaded","onImgFailed","imgsComplete","liveregionCurrent","preventScroll","controlsContainerHTML","prevButtonHTML","nextButtonHTML","prevIsButton","nextIsButton","navContainerHTML","navItems","pages","getPages","pagesCached","navClicked","navCurrentIndex","getCurrentNavIndex","navCurrentIndexCached","navActiveClass","navStr","navStrCurrent","autoplayButtonHTML","autoplayHtmlStrings","autoplayTimer","animating","autoplayHoverPaused","autoplayUserPaused","autoplayVisibilityPaused","initPosition","lastPosition","translateInit","disX","disY","panStart","rafIndex","getDist","a","b","x","y","resetVariblesWhenDisable","replace","initStructure","initSheet","initSliderTransform","condition","tem","ind","min","getAbsIndex","absIndex","result","getItemsMax","arr","bp","apply","itemsMax","innerWidth","documentElement","clientWidth","body","getInsertPosition","pos","getClientWidth","div","rect","width","appendChild","getBoundingClientRect","right","left","gap","ww","parseInt","getSlideMarginLeft","getInnerWrapperStyles","edgePaddingTem","gutterTem","fixedWidthTem","speedTem","autoHeightBP","undefined","gutterTemUnit","dir","getTransitionDurationStyle","getContainerWidth","itemsTem","getSlideWidthStyle","dividend","getSlideGutterStyle","prop","getCSSPrefix","num","prefix","substring","toLowerCase","getAnimationDurationStyle","classOuter","classInner","hasGutter","wp","insertBefore","fragmentBefore","createDocumentFragment","fragmentAfter","j","cloneFirst","cloneNode","firstChild","cloneLast","imgs","querySelectorAll","img","src","indexOf","imgLoaded","imgsLoadedCheck","getImageArray","initSliderTransformStyleCheck","doContainerTransformSilent","initTools","initEvents","stylesApplicationCheck","abs","initSliderTransformCore","setTimeout","setSlidePositions","updateContentWrapperHeight","l","style","getComputedStyle","fontSize","slide","marginLeft","update_carousel_transition_duration","cssText","opts","middleWrapperStr","innerWrapperStr","containerStr","slideStr","itemsBP","fixedWidthBP","speedBP","edgePaddingBP","gutterBP","insertRule","cssRules","updateSlideStatus","insertAdjacentHTML","getLiveRegionStr","txt","toggleAutoplay","startAutoplay","initIndex","navHtml","hiddenStr","updateNavVisibility","isButton","updateControlsStatus","disableUI","eve","onTransitionEnd","on","resizeTasks","emit","info","onResize","doAutoHeight","doLazyLoad","disableSlider","freezeSlider","additionalUpdates","destroy","ownerNode","clearInterval","htmlList","prevEl","previousElementSibling","parentEl","nextElementSibling","firstElementChild","getEvent","bpChanged","breakpointZoneTem","needContainerTransform","indChanged","itemsChanged","disableTem","freezeTem","arrowKeysTem","controlsTem","navTem","touchTem","mouseDragTem","autoplayTem","autoplayHoverPauseTem","autoplayResetOnVisibilityTem","indexTem","autoHeightTem","controlsTextTem","centerTem","autoplayTextTem","updateIndex","enableSlider","doContainerTransform","getContainerTransformValue","unfreezeSlider","stopAutoplay","height","innerHTML","html","len","updateLiveRegion","updateGallerySlidePositions","vp","leftEdge","rightEdge","enableUI","margin","classN","getVisibleSlideRange","start","end","rangestart","rangeend","parseFloat","point","cell","arg","stopPropagation","srcset","getTarget","imgFailed","imgCompleted","imgSelector","updateInnerWrapperHeight","cb","complete","splice","updateNavStatus","getMaxSlideHeight","slideStart","slideRange","heights","offsetHeight","maxHeight","attr","attr2","base","range","navPrev","navCurrent","getLowerCaseNodeName","isAriaDisabled","getAttribute","disEnableElement","setAttribute","toString","prevDisabled","nextDisabled","disablePrev","disableNext","resetDuration","getSliderWidth","getCenterGap","denominator","animateSlide","number","classOut","classIn","isOut","transformCore","render","sliderMoved","type","strTrans","event","target","propertyName","goTo","targetIndex","indexGap","isNaN","factor","passEventObject","targetIn","navIndex","Number","targetIndexBase","setAutoplayTimer","setInterval","stopAutoplayTimer","updateAutoplayButton","action","play","pause","hidden","keyIndex","keyCode","setFocus","focus","curElement","activeElement","isTouchEvent","changedTouches","srcElement","preventDefaultBehavior","preventDefault","returnValue","getMoveDirectionExpected","$","clientX","clientY","panUpdate","cancelable","err","dist","percentageX","preventClick","indexMoved","moved","rough","fn","version","getInfo","updateSliderHeight","refresh","rebuild"],"mappings":"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","sourcesContent":["// Object.keys\nif (!Object.keys) {\n  Object.keys = function(object) {\n    var keys = [];\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n    return keys;\n  };\n}\n\n// ChildNode.remove\nif(!(\"remove\" in Element.prototype)){\n  Element.prototype.remove = function(){\n    if(this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nimport { raf } from './helpers/raf.js';\nimport { caf } from './helpers/caf.js';\nimport { extend } from './helpers/extend.js';\nimport { checkStorageValue } from './helpers/checkStorageValue.js';\nimport { setLocalStorage } from './helpers/setLocalStorage.js';\nimport { getSlideId } from './helpers/getSlideId.js';\nimport { calc } from './helpers/calc.js';\nimport { percentageLayout } from './helpers/percentageLayout.js';\nimport { mediaquerySupport } from './helpers/mediaquerySupport.js';\nimport { createStyleSheet } from './helpers/createStyleSheet.js';\nimport { addCSSRule } from './helpers/addCSSRule.js';\nimport { removeCSSRule } from './helpers/removeCSSRule.js';\nimport { getCssRulesLength } from './helpers/getCssRulesLength.js';\nimport { toDegree } from './helpers/toDegree.js';\nimport { getTouchDirection } from './helpers/getTouchDirection.js';\nimport { forEach } from './helpers/forEach.js';\nimport { hasClass } from './helpers/hasClass.js';\nimport { addClass } from './helpers/addClass.js';\nimport { removeClass } from './helpers/removeClass.js';\nimport { hasAttr } from './helpers/hasAttr.js';\nimport { getAttr } from './helpers/getAttr.js';\nimport { setAttrs } from './helpers/setAttrs.js';\nimport { removeAttrs } from './helpers/removeAttrs.js';\nimport { arrayFromNodeList } from './helpers/arrayFromNodeList.js';\nimport { hideElement } from './helpers/hideElement.js';\nimport { showElement } from './helpers/showElement.js';\nimport { isVisible } from './helpers/isVisible.js';\nimport { whichProperty } from './helpers/whichProperty.js';\nimport { has3DTransforms } from './helpers/has3DTransforms.js';\nimport { getEndProperty } from './helpers/getEndProperty.js';\nimport { addEvents } from './helpers/addEvents.js';\nimport { removeEvents } from './helpers/removeEvents.js';\nimport { Events } from './helpers/events.js';\nimport { jsTransform } from './helpers/jsTransform.js';\n\nexport var tns = function(options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n\n  var doc = document,\n      win = window,\n      KEYS = {\n        ENTER: 13,\n        SPACE: 32,\n        LEFT: 37,\n        RIGHT: 39\n      },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date;\n\n    try {\n      tnsStorage = win.localStorage;\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n      if (!localStorageAccess) { tnsStorage = {}; }\n    } catch(e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function(item) { tnsStorage.removeItem(item); });\n      }\n      // update browserInfo\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess);\n\n  // get element nodes from selectors\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n\n  tnsList.forEach(function(item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) { console.warn('Can\\'t find', options[item]); }\n        return;\n      }\n    }\n  });\n\n  // make sure at least 1 slide\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) { console.warn('No slides found in', options.container); }\n    return;\n   }\n\n  // update options\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n    for (var key in responsive) {\n      var val = responsive[key];\n      // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n      val = typeof val === 'number' ? {items: val} : val;\n      responsiveTem[key] = val;\n    }\n    responsive = responsiveTem;\n    responsiveTem = null;\n  }\n\n  // update options\n  function updateOptions (obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') { obj[key] = 'page'; }\n        if (key === 'edgePadding') { obj[key] = false; }\n        if (key === 'autoHeight') { obj[key] = false; }\n      }\n\n      // update responsive options\n      if (key === 'responsive') { updateOptions(obj[key]); }\n    }\n  }\n  if (!carousel) { updateOptions(options); }\n\n\n  // === define and set variables ===\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n  if (responsive) { setBreakpointZone(); }\n  if (carousel) { container.className += ' tns-vpfix'; }\n\n  // fixedWidth: viewport > rightBoundary > indexMax\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions, // collection of slide positions\n      slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = (!carousel || !loop) ? true : false,\n      // transform\n      transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n      getIndexMax = (function () {\n        if (fixedWidth) {\n          return function() { return center && !loop ? slideCount - 1 : Math.ceil(- rightBoundary / (fixedWidth + gutter)); };\n        } else if (autoWidth) {\n          return function() {\n            for (var i = 0; i < slideCountNew; i++) {\n              if (slidePositions[i] >= - rightBoundary) { return i; }\n            }\n          };\n        } else {\n          return function() {\n            if (center && carousel && !loop) {\n              return slideCount - 1;\n            } else {\n              return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n            }\n          };\n        }\n      })(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index,\n      displayIndex = getCurrentSlide(),\n      indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      // resize\n      resizeTimer,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n      newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n        'click': onControlsClick,\n        'keydown': onControlsKeydown\n      },\n      navEvents = {\n        'click': onNavClick,\n        'keydown': onNavKeydown\n      },\n      hoverEvents = {\n        'mouseover': mouseoverPause,\n        'mouseout': mouseoutRestart\n      },\n      visibilityEvent = {'visibilitychange': onVisibilityChange},\n      docmentKeydownEvent = {'keydown': onDocumentKeydown},\n      touchEvents = {\n        'touchstart': onPanStart,\n        'touchmove': onPanMove,\n        'touchend': onPanEnd,\n        'touchcancel': onPanEnd\n      }, dragEvents = {\n        'mousedown': onPanStart,\n        'mousemove': onPanMove,\n        'mouseup': onPanEnd,\n        'mouseleave': onPanEnd\n      },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n        'load': onImgLoaded,\n        'error': onImgFailed\n      },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false;\n\n  // controls\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  }\n\n  // nav\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  }\n\n  // autoplay\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        disX,\n        disY,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ?\n          function(a, b) { return a.x - b.x; } :\n          function(a, b) { return a.y - b.y; };\n  }\n\n  // disable slider when slidecount <= items\n  if (!autoWidth) { resetVariblesWhenDisable(disable || freeze); }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n\n  }\n\n  if (carousel) { container.className = container.className.replace('tns-vpfix', ''); }\n  initStructure();\n  initSheet();\n  initSliderTransform();\n\n  // === COMMON FUNCTIONS === //\n  function resetVariblesWhenDisable (condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide () {\n    var tem = carousel ? index - cloneCount : index;\n    while (tem < 0) { tem += slideCount; }\n    return tem%slideCount + 1;\n  }\n\n  function getStartIndex (ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex (i) {\n    if (i == null) { i = index; }\n\n    if (carousel) { i -= cloneCount; }\n    while (i < 0) { i += slideCount; }\n\n    return Math.floor(i%slideCount);\n  }\n\n  function getCurrentNavIndex () {\n    var absIndex = getAbsIndex(),\n        result;\n\n    result = navAsThumbnails ? absIndex :\n      fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) :\n          Math.floor(absIndex / items);\n\n    // set active nav to the last one when reaches the right edge\n    if (!loop && carousel && index === indexMax) { result = pages - 1; }\n\n    return result;\n  }\n\n  function getItemsMax () {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || (fixedWidth && !viewportMax)) {\n      return slideCount - 1;\n    // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) { arr.push(options[str]); }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n          if (tem && (fixedWidth || tem < slideCount)) { arr.push(tem); }\n        }\n      }\n\n      if (!arr.length) { arr.push(0); }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop () {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount)/2) : (itemsMax * 4 - slideCount);\n    result = Math.max(itemsMax, result);\n\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth () {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition (pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth (el) {\n    if (el == null) { return; }\n    var div = doc.createElement('div'), rect, width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth () {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption (item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) { return true; }\n        }\n      }\n      return false;\n    }\n  }\n\n  // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n  function getOption (item, ww) {\n    if (ww == null) { ww = windowWidth; }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) { result = responsive[bp][item]; }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') { result = getOption('items'); }\n      if (!carousel && (item === 'slideBy' || item === 'items')) { result = Math.floor(result); }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft (i) {\n    return CALC ?\n      CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' :\n      i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles (edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n      if (gutterTem) { gap -= gutterTem; }\n      str = horizontal ?\n        'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' :\n        'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';'\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) { str += getTransitionDurationStyle(speedTem); }\n    return str;\n  }\n\n  function getContainerWidth (fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ?\n        CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' :\n        slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle (fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = (fixedWidthTem + gutterTem) + 'px';\n    } else {\n      if (!carousel) { itemsTem = Math.floor(itemsTem); }\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ?\n        CALC + '(100% / ' + dividend + ')' :\n        100 / dividend + '%';\n    }\n\n    width = 'width:' + width;\n\n    // inner slider: overwrite outer slider styles\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle (gutterTem) {\n    var str = '';\n\n    // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop +  dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix (name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n    if (prefix) { prefix = '-' + prefix + '-'; }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle (speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle (speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure () {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner',\n        hasGutter = hasOption('gutter');\n\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw';\n\n    // set container properties\n    if (container.id === '') { container.id = slideId; }\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n    if (autoWidth) { newContainerClasses += ' tns-autowidth'; }\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses;\n\n    // add constrain layer for carousel\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container);\n\n    // add id, class, aria attributes\n    // before clone slides\n    forEach(slideItems, function(item, i) {\n      addClass(item, 'tns-item');\n      if (!item.id) { item.id = slideId + '-item' + i; }\n      if (!carousel && animateNormal) { addClass(item, animateNormal); }\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    });\n\n    // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j%slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n\n  }\n\n  function initSliderTransform () {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img');\n\n      // add img load event listener\n      forEach(imgs, function(img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n\n            img.src = src;\n          // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      });\n\n      // set imgsComplete\n      raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), function() { imgsComplete = true; }); });\n\n      // reset imgs for auto height: check visible imgs only\n      if (hasOption('autoHeight')) { imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1)); }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck); });\n\n    } else {\n      // set container transform property\n      if (carousel) { doContainerTransformSilent(); }\n\n      // update slider tools and events\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck () {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n\n        (Math.abs(left - right) <= 1) ?\n          initSliderTransformCore() :\n          setTimeout(function(){ stylesApplicationCheck() }, 16);\n      })();\n\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n\n  function initSliderTransformCore () {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n        if (freezable) { freeze = getFreeze(); }\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    }\n\n    // set container transform property\n    if (carousel) { doContainerTransformSilent(); }\n\n    // update slider tools and events\n    initTools();\n    initEvents();\n  }\n\n  function initSheet () {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // #### LAYOUT\n\n    // ## INLINE-BLOCK VS FLOAT\n\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    }\n\n\n    // ## BASIC STYLES\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      }\n\n      // inner wrapper styles\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet));\n\n      // container styles\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      }\n\n      // slide styles\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n      if (options.gutter) { str += getSlideGutterStyle(options.gutter); }\n      // set gallery items transition-duration\n      if (!carousel) {\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        if (ANIMATIONDURATION) { str += getAnimationDurationStyle(speed); }\n      }\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n\n    // non CSS mediaqueries: IE8\n    // ## update inner wrapper, container, slides if needed\n    // set inline styles for inner wrapper & container\n    // insert stylesheet (one line) for slides only (since slides are many)\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration();\n\n      // inner wrapper styles\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight);\n\n      // container styles\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      }\n\n      // slide styles\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n      if (gutter) { str += getSlideGutterStyle(gutter); }\n\n      // append to the last line\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n    }\n\n    // ## MEDIAQUERIES\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp);\n\n        // middle wrapper string\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        }\n\n        // inner wrapper string\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        }\n\n        // container string\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || (fixedWidth && 'gutter' in opts))) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        }\n\n        // slide string\n        if ('fixedWidth' in opts || (fixedWidth && 'gutter' in opts) || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        }\n        // set gallery items transition-duration\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) { slideStr += getTransitionDurationStyle(speedBP); }\n          if (ANIMATIONDURATION) { slideStr += getAnimationDurationStyle(speedBP); }\n        }\n        if (slideStr) { slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}'; }\n\n        // add up\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools () {\n    // == slides ==\n    updateSlideStatus();\n\n    // == live region ==\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current');\n\n    // == autoplayInit ==\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {'data-action': txt});\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      }\n\n      // add event\n      if (autoplayButton) {\n        addEvents(autoplayButton, {'click': toggleAutoplay});\n      }\n\n      if (autoplay) {\n        startAutoplay();\n        if (autoplayHoverPause) { addEvents(container, hoverEvents); }\n        if (autoplayResetOnVisibility) { addEvents(container, visibilityEvent); }\n      }\n    }\n\n    // == navInit ==\n    if (hasNav) {\n      var initIndex = !carousel ? 0 : cloneCount;\n      // customized nav\n      // will not hide the navs in case they're thumbnails\n      if (navContainer) {\n        setAttrs(navContainer, {'aria-label': 'Carousel Pagination'});\n        navItems = navContainer.children;\n        forEach(navItems, function(item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId,\n          });\n        });\n\n      // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i +'\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) +'\"></button>';\n        }\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility();\n\n      // add transition\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass);\n\n      // add events\n      addEvents(navContainer, navEvents);\n    }\n\n\n\n    // == controlsInit ==\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[1] + '</button></div>');\n\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1',\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs(prevButton, {'data-controls' : 'prev'});\n        setAttrs(nextButton, {'data-controls' : 'next'});\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n\n      updateControlsStatus();\n\n      // add events\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    }\n\n    // hide tools if needed\n    disableUI();\n  }\n\n  function initEvents () {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) { addEvents(container, touchEvents, options.preventScrollOnTouch); }\n    if (mouseDrag) { addEvents(container, dragEvents); }\n    if (arrowKeys) { addEvents(doc, docmentKeydownEvent); }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {'resize': onResize});\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) { doAutoHeight(); }\n    }\n\n    doLazyLoad();\n    if (disable) { disableSlider(); } else if (freeze) { freezeSlider(); }\n\n    events.on('indexChanged', additionalUpdates);\n    if (nested === 'inner') { events.emit('innerLoaded', info()); }\n    if (typeof onInit === 'function') { onInit(info()); }\n    isOn = true;\n  }\n\n  function destroy () {\n    // sheet\n    sheet.disabled = true;\n    if (sheet.ownerNode) { sheet.ownerNode.remove(); }\n\n    // remove win event listeners\n    removeEvents(win, {'resize': onResize});\n\n    // arrowKeys, controls, nav\n    if (arrowKeys) { removeEvents(doc, docmentKeydownEvent); }\n    if (controlsContainer) { removeEvents(controlsContainer, controlsEvents); }\n    if (navContainer) { removeEvents(navContainer, navEvents); }\n\n    // autoplay\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n    if (autoplayButton) { removeEvents(autoplayButton, {'click': toggleAutoplay}); }\n    if (autoplay) { clearInterval(autoplayTimer); }\n\n    // container\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n    if (touch) { removeEvents(container, touchEvents); }\n    if (mouseDrag) { removeEvents(container, dragEvents); }\n\n    // cache Object values in options && reset HTML\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n\n    tnsList.forEach(function(item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    });\n\n\n    // reset variables\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = resizeTimer = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = disX = disY = panStart = rafIndex = getDist = touch = mouseDrag = null;\n    // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') { this[a] = null; }\n    }\n    isOn = false;\n  }\n\n// === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n  function onResize (e) {\n    raf(function(){ resizeTasks(getEvent(e)); });\n  }\n\n  function resizeTasks (e) {\n    if (!isOn) { return; }\n    if (nested === 'outer') { events.emit('outerResized', info(e)); }\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone;\n      // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n      if (bpChanged) { events.emit('newBreakpointStart', info(e)); }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    }\n\n    // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    }\n    // update options\n    resetVariblesWhenDisable(disable);\n\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n        needContainerTransform = true;\n      }\n    }\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n                                          // fixedWidth: <= viewport, fixedWidth, gutter\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n                                // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) { indexMax = getIndexMax(); } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n                            // <= fixedWidth: fixedWidth, gutter, rightBoundary\n                            // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n    if (!autoplay) { autoplayHoverPause = autoplayResetOnVisibility = false; }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ?\n        addEvents(doc, docmentKeydownEvent) :\n        removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) { showElement(prevButton); }\n          if (nextButton) { showElement(nextButton); }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) { hideElement(prevButton); }\n          if (nextButton) { hideElement(nextButton); }\n        }\n      }\n    }\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer)\n      }\n    }\n    if (touch !== touchTem) {\n      touch ?\n        addEvents(container, touchEvents, options.preventScrollOnTouch) :\n        removeEvents(container, touchEvents);\n    }\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ?\n        addEvents(container, dragEvents) :\n        removeEvents(container, dragEvents);\n    }\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) { showElement(autoplayButton); }\n        if (!animating && !autoplayUserPaused) { startAutoplay(); }\n      } else {\n        if (autoplayButton) { hideElement(autoplayButton); }\n        if (animating) { stopAutoplay(); }\n      }\n    }\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ?\n        addEvents(container, hoverEvents) :\n        removeEvents(container, hoverEvents);\n    }\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ?\n        addEvents(doc, visibilityEvent) :\n        removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) { needContainerTransform = true; }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) { innerWrapper.style.height = ''; }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) { needContainerTransform = true; }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) { additionalUpdates(); }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) { updateGallerySlidePositions(); }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          }\n\n          // slide styles\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) +\n                    getSlideGutterStyle(gutter);\n\n          // remove the last line and\n          // add new styles\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      }\n\n      // auto height\n      if (autoHeight) { doAutoHeight(); }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) { events.emit('newBreakpointEnd', info(e)); }\n  }\n\n\n\n\n\n  // === INITIALIZATION FUNCTIONS === //\n  function getFreeze () {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return  slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone () {\n    breakpointZone = 0;\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n      if (windowWidth >= bp) { breakpointZone = bp; }\n    }\n  }\n\n  // (slideBy, indexMin, indexMax) => index\n  var updateIndex = (function () {\n    return loop ?\n      carousel ?\n        // loop + carousel\n        function () {\n          var leftEdge = indexMin,\n              rightEdge = indexMax;\n\n          leftEdge += slideBy;\n          rightEdge -= slideBy;\n\n          // adjust edges when has edge paddings\n          // or fixed-width slider with extra space on the right side\n          if (edgePadding) {\n            leftEdge += 1;\n            rightEdge -= 1;\n          } else if (fixedWidth) {\n            if ((viewport + gutter)%(fixedWidth + gutter)) { rightEdge -= 1; }\n          }\n\n          if (cloneCount) {\n            if (index > rightEdge) {\n              index -= slideCount;\n            } else if (index < leftEdge) {\n              index += slideCount;\n            }\n          }\n        } :\n        // loop + gallery\n        function() {\n          if (index > indexMax) {\n            while (index >= indexMin + slideCount) { index -= slideCount; }\n          } else if (index < indexMin) {\n            while (index <= indexMax - slideCount) { index += slideCount; }\n          }\n        } :\n      // non-loop\n      function() {\n        index = Math.max(indexMin, Math.min(indexMax, index));\n      };\n  })();\n\n  function disableUI () {\n    if (!autoplay && autoplayButton) { hideElement(autoplayButton); }\n    if (!nav && navContainer) { hideElement(navContainer); }\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) { hideElement(prevButton); }\n        if (nextButton) { hideElement(nextButton); }\n      }\n    }\n  }\n\n  function enableUI () {\n    if (autoplay && autoplayButton) { showElement(autoplayButton); }\n    if (nav && navContainer) { showElement(navContainer); }\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) { showElement(prevButton); }\n        if (nextButton) { showElement(nextButton); }\n      }\n    }\n  }\n\n  function freezeSlider () {\n    if (frozen) { return; }\n\n    // remove edge padding from inner wrapper\n    if (edgePadding) { innerWrapper.style.margin = '0px'; }\n\n    // add class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { addClass(slideItems[i], str); }\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    frozen = true;\n  }\n\n  function unfreezeSlider () {\n    if (!frozen) { return; }\n\n    // restore edge padding for inner wrapper\n    // for mordern browsers\n    if (edgePadding && CSSMQ) { innerWrapper.style.margin = ''; }\n\n    // remove class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { removeClass(slideItems[i], str); }\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    frozen = false;\n  }\n\n  function disableSlider () {\n    if (disabled) { return; }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { hideElement(slideItems[j]); }\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // vertical slider\n    if (!horizontal || !carousel) { removeAttrs(innerWrapper, ['style']); }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    disabled = true;\n  }\n\n  function enableSlider () {\n    if (!disabled) { return; }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { showElement(slideItems[j]); }\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    disabled = false;\n  }\n\n  function updateLiveRegion () {\n    var str = getLiveRegionStr();\n    if (liveregionCurrent.innerHTML !== str) { liveregionCurrent.innerHTML = str; }\n  }\n\n  function getLiveRegionStr () {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    var start = index, end, rangestart, rangeend;\n\n    // get range start, range end for autoWidth and fixedWidth\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = - (parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    }\n\n    // get start, end\n    // - check auto width\n    if (autoWidth) {\n      slidePositions.forEach(function(point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) { start = i; }\n          if (rangeend - point >= 0.5) { end = i; }\n        }\n      });\n\n    // - check percentage width, fixed width\n    } else {\n\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n        if (center || edgePadding) {\n          start = Math.floor(rangestart/cell);\n          end = Math.ceil(rangeend/cell - 1);\n        } else {\n          end = start + Math.ceil(viewport/cell) - 1;\n        }\n\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad () {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n          eve[TRANSITIONEND] = function (e) { e.stopPropagation(); };\n          addEvents(img, eve);\n\n          addEvents(img, imgEvents);\n\n          // update src\n          img.src = getAttr(img, 'data-src');\n\n          // update srcset\n          var srcset = getAttr(img, 'data-srcset');\n          if (srcset) { img.srcset = srcset; }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded (e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed (e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded (img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed (img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted (img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray (start, end, imgSelector) {\n    var imgs = [];\n    if (!imgSelector) { imgSelector = 'img'; }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) { imgs.push(img); });\n      start++;\n    }\n\n    return imgs;\n  }\n\n  // check if all visible images are loaded\n  // and update container height if it's done\n  function doAutoHeight () {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function(){ imgsLoadedCheck(imgs, updateInnerWrapperHeight); });\n  }\n\n  function imgsLoadedCheck (imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) { return cb(); }\n\n    // check image classes\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) { imgCompleted(img); } // Check image.complete\n      if (hasClass(img, imgCompleteClass)) { imgs.splice(index, 1); }\n    });\n\n    // execute callback function if selected images are all complete\n    if (!imgs.length) { return cb(); }\n\n    // otherwise execute this functiona again\n    raf(function(){ imgsLoadedCheck(imgs, cb); });\n  }\n\n  function additionalUpdates () {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n\n  function update_carousel_transition_duration () {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight (slideStart, slideRange) {\n    var heights = [];\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  }\n\n  // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n  function updateInnerWrapperHeight () {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) { wp.style.height = maxHeight + 'px'; }\n  }\n\n  // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n  function setSlidePositions () {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n\n    forEach(slideItems, function(item, i) {\n      // skip the first slide\n      if (i) { slidePositions.push(item.getBoundingClientRect()[attr] - base); }\n      // add the end edge\n      if (i === slideCountNew - 1) { slidePositions.push(item.getBoundingClientRect()[attr2] - base); }\n    });\n  }\n\n  // update slide\n  function updateSlideStatus () {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n\n    forEach(slideItems, function(item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        }\n      // hide slides\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  }\n\n  // gallery: update slide position\n  function updateGallerySlidePositions () {\n    var l = index + Math.min(slideCount, items);\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      }\n\n      // remove outlet animation\n      removeClass(item, animateOut);\n    }\n\n    // removing '.tns-moving'\n    setTimeout(function() {\n      forEach(slideItems, function(el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  }\n\n  // set tabindex on Nav\n  function updateNavStatus () {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n\n        setAttrs(navCurrent, {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName (el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton (el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled (el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement (isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  }\n\n  // set 'disabled' to true on controls when reach the edges\n  function updateControlsStatus () {\n    if (!controls || rewind || loop) { return; }\n\n    var prevDisabled = (prevIsButton) ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = (nextIsButton) ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = (index <= indexMin) ? true : false,\n        disableNext = (!rewind && index >= indexMax) ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  }\n\n  // set duration\n  function resetDuration (el, str) {\n    if (TRANSITIONDURATION) { el.style[TRANSITIONDURATION] = str; }\n  }\n\n  function getSliderWidth () {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap (num) {\n    if (num == null) { num = index; }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? ((viewport - gap) - (slidePositions[num + 1] - slidePositions[num] - gutter))/2 :\n      fixedWidth ? (viewport - fixedWidth) / 2 :\n        (items - 1) / 2;\n  }\n\n  function getRightBoundary () {\n    var gap = edgePadding ? gutter : 0,\n        result = (viewport + gap) - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? - (fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() :\n        getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n    if (result > 0) { result = 0; }\n\n    return result;\n  }\n\n  function getContainerTransformValue (num) {\n    if (num == null) { num = index; }\n\n    var val;\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = - (fixedWidth + gutter) * num;\n        if (center) { val += getCenterGap(); }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n        if (center) { num -= getCenterGap(); }\n        val = - num * 100 / denominator;\n      }\n    } else {\n      val = - slidePositions[num];\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) { val = Math.max(val, rightBoundary); }\n\n    val += (horizontal && !autoWidth && !fixedWidth) ? '%' : 'px';\n\n    return val;\n  }\n\n  function doContainerTransformSilent (val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide (number, classOut, classIn, isOut) {\n    var l = number + items;\n    if (!loop) { l = Math.min(l, slideCountNew); }\n\n    for (var i = number; i < l; i++) {\n        var item = slideItems[i];\n\n      // set item positions\n      if (!isOut) { item.style.left = (i - index) * 100 / items + '%'; }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) { slideItemsOut.push(item); }\n    }\n  }\n\n  // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n  var transformCore = (function () {\n    return carousel ?\n      function () {\n        resetDuration(container, '');\n        if (TRANSITIONDURATION || !speed) {\n          // for morden browsers with non-zero duration or\n          // zero duration for all browsers\n          doContainerTransform();\n          // run fallback function manually\n          // when duration is 0 / container is hidden\n          if (!speed || !isVisible(container)) { onTransitionEnd(); }\n\n        } else {\n          // for old browser with non-zero duration\n          jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n        }\n\n        if (!horizontal) { updateContentWrapperHeight(); }\n      } :\n      function () {\n        slideItemsOut = [];\n\n        var eve = {};\n        eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n        removeEvents(slideItems[indexCached], eve);\n        addEvents(slideItems[index], eve);\n\n        animateSlide(indexCached, animateIn, animateOut, true);\n        animateSlide(index, animateNormal, animateIn);\n\n        // run fallback function manually\n        // when transition or animation not supported / duration is 0\n        if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) { onTransitionEnd(); }\n      };\n  })();\n\n  function render (e, sliderMoved) {\n    if (updateIndexBeforeTransform) { updateIndex(); }\n\n    // render when slider was moved (touch or drag) even though index may not change\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n      if (autoHeight) { doAutoHeight(); }\n\n      // pause autoplay when click or keydown from user\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) { stopAutoplay(); }\n\n      running = true;\n      transformCore();\n    }\n  }\n\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n  function strTrans (str) {\n    return str.toLowerCase().replace(/-/g, '');\n  }\n\n  // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n  function onTransitionEnd (event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i];\n          // set item positions\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n      if (!event ||\n          !carousel && event.target.parentNode === container ||\n          event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') { events.emit('innerLoaded', info()); }\n        running = false;\n        indexCached = index;\n      }\n    }\n\n  }\n\n  // # ACTIONS\n  function goTo (targetIndex, e) {\n    if (freeze) { return; }\n\n    // prev slideBy\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1);\n\n    // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1);\n\n    // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = - absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') { targetIndex = parseInt(targetIndex); }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) { targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex)); }\n\n          indexGap = targetIndex - absIndex;\n        }\n      }\n\n      // gallery: make sure new page won't overlap with current page\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += (index + indexGap - slideCount) >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap;\n\n      // make sure index is in range\n      if (carousel && loop) {\n        if (index < indexMin) { index += slideCount; }\n        if (index > indexMax) { index -= slideCount; }\n      }\n\n      // if index is changed, start rendering\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n\n    }\n  }\n\n  // on controls click\n  function onControlsClick (e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) { target = target.parentNode; }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n      if (autoWidth) { index = Math.floor(index); }\n      // pass e when click control buttons or keydown\n      render((passEventObject || (e && e.type === 'keydown')) ? e : null);\n    }\n  }\n\n  // on nav click\n  function onNavClick (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e), navIndex;\n\n    // find the clicked nav item\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) { target = target.parentNode; }\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) { stopAutoplay(); }\n        navClicked = -1; // reset navClicked\n      }\n    }\n  }\n\n  // autoplay functions\n  function setAutoplayTimer () {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n\n    animating = true;\n  }\n\n  function stopAutoplayTimer () {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton (action, txt) {\n    setAttrs(autoplayButton, {'data-action': action});\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay () {\n    setAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('stop', autoplayText[1]); }\n  }\n\n  function stopAutoplay () {\n    stopAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('start', autoplayText[0]); }\n  }\n\n  // programaitcally play/pause the slider\n  function play () {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function pause () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange () {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause () {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart () {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  }\n\n  // keydown events on document\n  function onDocumentKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  }\n\n  // on key control\n  function onControlsKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) { onControlsClick(e, -1); }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  }\n\n  // set focus\n  function setFocus (el) {\n    el.focus();\n  }\n\n  // on key nav\n  function onNavKeydown (e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n    if (!hasAttr(curElement, 'data-nav')) { return; }\n\n    // var code = e.keyCode,\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) { setFocus(navItems[navIndex - 1]); }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) { setFocus(navItems[navIndex + 1]); }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent (e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n  function getTarget (e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent (e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior (e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected () {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    if (autoplay && animating) { stopAutoplayTimer(); }\n\n    panStart = true;\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove (e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) { rafIndex = raf(function(){ panUpdate(e); }); }\n      } else {\n        if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n        if (moveDirectionExpected) { preventScroll = true; }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate (e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n    caf(rafIndex);\n    if (panStart) { rafIndex = raf(function(){ panUpdate(e); }); }\n\n    if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) { preventScroll = true; }\n\n      try {\n        if (e.type) { events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e)); }\n      } catch(err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew): dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd (e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n      if (carousel) { resetDuration(container, ''); }\n      panStart = false;\n\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {'click': function preventClick (e) {\n            preventDefaultBehavior(e);\n            removeEvents(target, {'click': preventClick});\n          }});\n        }\n\n        if (carousel) {\n          rafIndex = raf(function() {\n            if (horizontal && !autoWidth) {\n              var indexMoved = - dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = - (translateInit + dist);\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n                  if (moved > slidePositions[i] && dist < 0) { index += 1; }\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    }\n\n    // reset\n    if (options.preventScrollOnTouch === 'auto') { preventScroll = false; }\n    if (swipeAngle) { moveDirectionExpected = '?'; }\n    if (autoplay && !animating) { setAutoplayTimer(); }\n  }\n\n  // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n  function updateContentWrapperHeight () {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages () {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n  function updateNavVisibility () {\n    if (!nav || navAsThumbnails) { return; }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      }\n\n      // cache pages\n      pagesCached = pages;\n    }\n  }\n\n  function info (e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {},\n    };\n  }\n\n  return {\n    version: '2.9.3',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function() {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\n"]},"metadata":{},"sourceType":"module"}